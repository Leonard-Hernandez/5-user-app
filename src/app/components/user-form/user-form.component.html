<div class="modal" tabindex="-1" style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{user.id > 0 ? 'Update' : 'Save'}}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="onOpen()"></button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="onSubmit(userForm)" #userForm="ngForm">
            <div>
              <input 
                  placeholder="name" 
                  name="name"
                  [(ngModel)]="user.name" 
                  class="form-control"
                  required
                  #name="ngModel"
              />
              @if (name.invalid && (name.dirty || name.touched)) {
                  @if (name.errors!['required']) {
                      <div class="alert alert-danger">El nombre es requerido</div>
                  }
              }
            </div>
            <div>
              <input
                placeholder="lastname"
                name="lastname"
                [(ngModel)]="user.lastname"
                class="form-control my-2"
                required
                #lastname="ngModel"
              />
              @if (lastname.invalid && (lastname.dirty || lastname.touched)) {
                  @if (lastname.errors!['required']) {
                      <div class="alert alert-danger">El apellido es requerido</div>
                  }
              }
            </div>
            <div>
              <input
                placeholder="email"
                name="email"
                email
                [(ngModel)]="user.email"
                class="form-control my-2"
                required
                #email="ngModel"
              />
              @if (email.invalid && (email.dirty || email.touched)) {
                  @if (email.errors!['required']) {
                      <div class="alert alert-danger">El email es requerido</div>
                  }
                  @if (email.errors!['email']) {
                      <div class="alert alert-danger">El email es invalido</div>
                  }
              }
            </div>
            <div>
              <input
                placeholder="user"
                name="user"
                [(ngModel)]="user.username"
                class="form-control my-2"
                required
                type="email"
                minlength="8"
                #username="ngModel"
              />
              @if (username.invalid && (username.dirty || username.touched)) {
                  @if (username.errors!['required']) {
                      <div class="alert alert-danger">El usuario es requerido</div>
                  }
                  @if (username.errors!['minlength']) {
                      <div class="alert alert-danger">El usuario debe tener al menos 8 caracteres</div>
                  }
              }
            </div>
            <div>
              <input
                placeholder="password"
                name="password"
                type="password"
                [(ngModel)]="user.password"
                class="form-control my-2"
                required
                minlength="6"
                #password="ngModel"
              />
              @if (password.invalid && (password.dirty || password.touched)) {
                  @if (password.errors!['required']) {
                      <div class="alert alert-danger">La contraseña es requerida</div>
                  }
                  @if (password.errors!['minlength']) {
                      <div class="alert alert-danger">La contraseña debe tener al menos 6 caracteres</div>
                  }
              }
            </div>
            <div>
              <button 
                  type="submit" 
                  class="btn btn-primary m-2" 
                  [disabled]="userForm.invalid">
                      {{user.id > 0 ? 'Update' : 'Save'}}
              </button>
              <button type="button" class="btn btn-secondary m-2" (click)="onClear(userForm)">Clear</button>
            </div>
          </form>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="onOpen()">Close</button>
        </div>
      </div>
    </div>
  </div>